<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Listening Voices Project | Sanctuary Archive</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lora:italic,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK Integration -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAxYXQFTFKrcSSLI1hELd86tmrmb6ndRjQ",
            authDomain: "the-listening-voices-project.firebaseapp.com",
            projectId: "the-listening-voices-project",
            storageBucket: "the-listening-voices-project.firebasestorage.app",
            messagingSenderId: "23814688068",
            appId: "1:23814688068:web:bfa44db13579a08a0fdb11"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Global function to save to Firestore
        window.saveSuggestion = async (name, story) => {
            try {
                await addDoc(collection(db, "suggestions"), {
                    name: name,
                    story: story,
                    timestamp: serverTimestamp(),
                    status: 'unread'
                });
                return true;
            } catch (e) {
                console.error("Database Connection Error: ", e);
                return false;
            }
        };
    </script>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .font-serif { font-family: 'Lora', serif; }
        .animate-fade-in { animation: fadeIn 0.8s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .logo-gradient { background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const Logo = ({ className = "w-8 h-8" }) => (
            <div className={`${className} logo-gradient rounded-xl flex items-center justify-center shadow-lg shadow-indigo-200`}>
                <svg viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className="w-5 h-5">
                    <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z" />
                    <path d="M19 10v1a7 7 0 0 1-14 0v-1" />
                    <line x1="12" x2="12" y1="19" y2="22" />
                </svg>
            </div>
        );

        const App = () => {
            const [view, setView] = useState('home');
            const [submitted, setSubmitted] = useState(false);
            const [loading, setLoading] = useState(false);

            useEffect(() => {
                lucide.createIcons();
                window.scrollTo(0, 0);
            }, [view, submitted]);

            const handleSubmit = async (e) => {
                e.preventDefault();
                setLoading(true);
                const name = e.target.name.value;
                const story = e.target.story.value;
                
                const success = await window.saveSuggestion(name, story);
                if (success) {
                    setSubmitted(true);
                } else {
                    alert("The Sanctuary database is currently disconnected. Please check your internet connection.");
                }
                setLoading(false);
            };

            const EliasArchive = (
                <div className="animate-fade-in max-w-3xl mx-auto py-12 md:py-20 px-6">
                    <button onClick={() => setView('home')} className="flex items-center gap-2 text-slate-400 hover:text-indigo-600 mb-12 font-bold text-[10px] uppercase tracking-[0.2em] transition-colors">
                        <i data-lucide="arrow-left" className="w-4 h-4"></i> Back to the Sanctuary
                    </button>
                    
                    <header className="mb-16">
                        <div className="flex items-center gap-4 mb-6">
                            <div className="w-16 h-16 bg-slate-900 text-white rounded-2xl flex items-center justify-center italic font-serif text-3xl shadow-xl">E</div>
                            <div>
                                <h1 className="text-4xl md:text-5xl font-extrabold text-slate-900 tracking-tight">Elias of 5th Street</h1>
                                <p className="text-xs font-bold text-indigo-600 uppercase tracking-widest mt-1">Archive Entry #001 • Recorded January 2026</p>
                            </div>
                        </div>
                        <div className="h-px w-full bg-slate-200"></div>
                    </header>

                    <article className="font-serif text-lg md:text-xl text-slate-700 italic space-y-8 leading-relaxed">
                        <div className="bg-white p-8 rounded-3xl border border-slate-100 shadow-sm not-italic font-sans text-slate-900 font-medium leading-snug">
                            "People walk past me like I'm part of the brickwork. But the bricks have ears, and I've been listening to the city breathe for three decades."
                        </div>
                        
                        <p>There’s a rhythm to the city that pulses just beneath the surface, a heartbeat that only those who stand still can truly hear. As pedestrians bustle about, lost in their own silos of thought, I remain a silent observer, absorbed in the symphony of life unfolding around me. Yet, in this constant flow of humanity, my voice has become forgotten, muffled by the noise of the world.</p>

                        <h2 className="not-italic font-sans font-bold text-slate-900 text-sm uppercase tracking-[0.3em] mt-12 mb-4 text-indigo-600">The Language of the City</h2>
                        <p>Every day, I hear snippets of conversations—a child laughing, lovers quarrelling, friends reuniting. Their words are like whispers in my ear. The city breathes through them, sharing secrets that go unnoticed by those who rush by. I’ve learned the nuances: the joy in a jubilant shout, the sorrow in a distant sigh, the urgency in hurried footsteps on a rainy day.</p>

                        <h2 className="not-italic font-sans font-bold text-slate-900 text-sm uppercase tracking-[0.3em] mt-12 mb-4 text-indigo-600">The Interplay of Time</h2>
                        <p>Three decades have woven themselves into the fabric of my experience. I’ve seen seasons change—summer’s vibrancy melting into autumn’s nostalgia. I've felt the city evolve, stretching and adapting like a living organism. New buildings rise like ambitious hopefuls while old ones crumble, their stories buried beneath layers of plaster and paint.</p>

                        <h2 className="not-italic font-sans font-bold text-slate-900 text-sm uppercase tracking-[0.3em] mt-12 mb-4 text-indigo-600">Wisdom in Silence</h2>
                        <p>Listening has taught me volumes. I’ve learned that every life has its burdens, dreams, and frustrations. The city whispers kindness to those who pause to listen. The stories are bittersweet; they weave a narrative of resilience amidst chaos.</p>

                        <p>As I stand here, a fixture in this urban landscape, I realize that to be a part of the brickwork is not merely to exist in silence but to hold the collective memory of the city. I am not just an observer; I am a guardian of its stories, ensuring they breathe and resonate long after the people have passed me by.</p>
                    </article>

                    <footer className="mt-20 pt-12 border-t border-slate-200 text-center">
                        <div className="inline-flex items-center gap-2 text-indigo-600 font-bold text-xs uppercase tracking-widest border border-indigo-100 px-6 py-3 rounded-full">
                            <i data-lucide="mic" className="w-4 h-4"></i> Audio Recording Pending Review
                        </div>
                    </footer>
                </div>
            );

            return (
                <div className="min-h-screen flex flex-col">
                    <nav className="bg-white/90 backdrop-blur-md sticky top-0 z-50 border-b border-slate-100 py-4 px-6">
                        <div className="max-w-6xl mx-auto flex justify-between items-center">
                            <div onClick={() => setView('home')} className="flex items-center gap-3 cursor-pointer">
                                <Logo />
                                <div className="flex flex-col">
                                    <span className="font-bold text-lg tracking-tight leading-none">The Listening Voices <span className="text-indigo-600">Project</span></span>
                                    <span className="text-[10px] text-slate-400 font-medium uppercase tracking-wider mt-1">Sanctuary Archive</span>
                                </div>
                            </div>
                            <button onClick={() => setView('submit')} className="bg-slate-900 text-white px-6 py-2.5 rounded-full text-sm font-bold hover:bg-indigo-600 transition-all shadow-md active:scale-95">
                                Suggest a Story
                            </button>
                        </div>
                    </nav>

                    <main className="flex-grow">
                        {view === 'home' && (
                            <div className="animate-fade-in">
                                <header className="pt-24 pb-20 px-6 bg-white">
                                    <div className="max-w-4xl mx-auto text-center">
                                        <div className="inline-flex items-center gap-2 px-3 py-1 mb-8 rounded-full bg-indigo-50 text-indigo-700 text-[10px] font-bold uppercase tracking-widest">January 2026 Release</div>
                                        <h1 className="text-5xl md:text-7xl font-extrabold text-slate-900 mb-8 tracking-tight leading-[1.1]">Bringing the <span className="italic font-serif text-indigo-600">forgotten</span> to the forefront.</h1>
                                        <p className="text-xl md:text-2xl text-slate-500 leading-relaxed max-w-2xl mx-auto font-serif italic mb-8">"To listen is to love."</p>
                                    </div>
                                </header>
                                <section className="max-w-6xl mx-auto px-6 py-10 pb-40">
                                    <div className="grid grid-cols-1 gap-12 max-w-2xl mx-auto">
                                        <div onClick={() => setView('story')} className="group cursor-pointer bg-white p-10 rounded-[3rem] shadow-sm border border-slate-100 hover:shadow-2xl transition-all duration-500">
                                            <div className="flex items-center gap-5 mb-8">
                                                <div className="w-14 h-14 bg-slate-900 text-white rounded-2xl flex items-center justify-center italic font-serif text-2xl group-hover:bg-indigo-600 transition-colors">E</div>
                                                <div>
                                                    <h3 className="font-bold text-2xl text-slate-900">Elias of 5th Street</h3>
                                                    <p className="text-xs text-indigo-600 font-bold uppercase tracking-widest mt-0.5">Primary Entry</p>
                                                </div>
                                            </div>
                                            <p className="text-slate-600 leading-relaxed font-serif italic text-xl mb-8">"People walk past me like I'm part of the brickwork. But the bricks have ears, and I've been listening..."</p>
                                            <div className="text-indigo-600 font-bold text-xs uppercase tracking-widest flex items-center gap-2">Read the Story <i data-lucide="arrow-right" className="w-4 h-4"></i></div>
                                        </div>
                                    </div>
                                </section>
                            </div>
                        )}

                        {view === 'story' && EliasArchive}

                        {view === 'submit' && (
                            <div className="animate-fade-in pt-24 pb-20 px-6">
                                <div className="max-w-xl mx-auto">
                                    <button onClick={() => setView('home')} className="flex items-center gap-2 text-slate-400 hover:text-indigo-600 mb-8 font-bold text-xs uppercase tracking-widest">
                                        <i data-lucide="arrow-left" className="w-4 h-4"></i> Back
                                    </button>
                                    <h2 className="text-4xl font-extrabold mb-4 tracking-tight">Whose voice are we missing?</h2>
                                    {submitted ? (
                                        <div className="bg-white border border-slate-100 p-12 rounded-[3rem] text-center shadow-xl">
                                            <i data-lucide="check-circle" className="w-16 h-16 text-green-500 mb-6 mx-auto"></i>
                                            <h3 className="text-2xl font-bold text-slate-900 mb-3">Recorded Successfully.</h3>
                                            <p className="text-slate-500 font-serif italic">Your suggestion has been added to our private archive for review.</p>
                                            <button onClick={() => { setView('home'); setSubmitted(false); }} className="mt-8 px-10 py-4 bg-slate-900 text-white rounded-full font-bold shadow-lg hover:bg-indigo-600 transition-all">Return to Home</button>
                                        </div>
                                    ) : (
                                        <form onSubmit={handleSubmit} className="space-y-6 bg-white p-8 md:p-12 rounded-[3.5rem] shadow-xl border border-slate-100">
                                            <input required name="name" type="text" className="w-full px-6 py-4 rounded-2xl bg-slate-50 border-transparent outline-none focus:bg-white focus:border-indigo-500/20 transition-all" placeholder="Your Name" />
                                            <textarea required name="story" rows="4" className="w-full px-6 py-4 rounded-2xl bg-slate-50 border-transparent outline-none focus:bg-white focus:border-indigo-500/20 transition-all resize-none" placeholder="Tell us about someone who needs to be heard..."></textarea>
                                            <button disabled={loading} type="submit" className="w-full py-5 bg-indigo-600 text-white rounded-2xl font-bold text-lg shadow-xl hover:bg-indigo-700 transition-all disabled:opacity-50">
                                                {loading ? "Archiving..." : "Submit to Project"}
                                            </button>
                                        </form>
                                    )}
                                </div>
                            </div>
                        )}
                    </main>

                    <footer className="py-20 px-6 bg-slate-900 text-white rounded-t-[4rem] text-center mt-20">
                        <Logo className="w-12 h-12 mb-4 mx-auto" />
                        <span className="font-bold text-2xl tracking-tighter block">The Listening Voices Project</span>
                        <p className="text-slate-400 mt-6 text-xl font-serif italic max-w-md mx-auto leading-relaxed">"Providing a sanctuary for the stories that go unheard."</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
